<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SonnyWorld | Донат</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        :root { --blue-dark: #1e3a8a; --blue-medium: #3b82f6; --white: #ffffff; --gray: #94a3b8; --success: #10b981; --telegram: #0088cc; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            color: #1e293b;
            min-height: 100vh;
        }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        
        /* Шапка */
        .header {
            background: var(--white);
            box-shadow: 0 2px 20px rgba(30, 58, 138, 0.1);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            font-size: 28px;
            font-weight: 800;
            gap: 15px;
            color: var(--blue-dark);
        }
        
        .logo i {
            color: var(--blue-medium);
            font-size: 32px;
        }
        
        .admin-btn {
            background: var(--blue-medium);
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Главная */
        .hero {
            text-align: center;
            padding: 80px 0;
            color: var(--white);
            background: linear-gradient(135deg, var(--blue-dark) 0%, var(--blue-medium) 100%);
            margin-bottom: 60px;
            clip-path: polygon(0 0, 100% 0, 100% 90%, 0 100%);
        }
        
        .hero h1 {
            font-size: 48px;
            margin-bottom: 20px;
            font-weight: 800;
        }
        
        .hero-subtitle {
            font-size: 20px;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto 40px;
        }
        
        /* Карточки */
        .donates { padding: 60px 0; }
        
        .section-title {
            text-align: center;
            font-size: 36px;
            margin-bottom: 10px;
            color: var(--blue-dark);
        }
        
        .section-subtitle {
            text-align: center;
            color: var(--gray);
            margin-bottom: 50px;
        }
        
        .donate-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }
        
        .donate-card {
            background: var(--white);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(30, 58, 138, 0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
        }
        
        .donate-card:hover {
            transform: translateY(-10px);
            border-color: var(--blue-medium);
            box-shadow: 0 20px 40px rgba(30, 58, 138, 0.15);
        }
        
        .donate-card.free {
            border-color: var(--success);
        }
        
        .card-badge {
            position: absolute;
            top: 15px;
            right: -30px;
            color: white;
            padding: 6px 35px;
            transform: rotate(45deg);
            font-size: 12px;
            font-weight: 600;
        }
        
        .donate-card.free .card-badge {
            background: var(--telegram);
        }
        
        .donate-card:not(.free) .card-badge {
            background: var(--blue-medium);
        }
        
        .card-title {
            font-size: 24px;
            color: var(--blue-dark);
            margin-bottom: 15px;
            text-align: center;
        }
        
        .price {
            font-size: 42px;
            font-weight: 800;
            color: var(--blue-medium);
            text-align: center;
            margin: 20px 0;
        }
        
        .donate-card.free .price {
            color: var(--telegram);
        }
        
        .features {
            list-style: none;
            margin: 25px 0;
        }
        
        .features li {
            padding: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .features i {
            color: var(--success);
        }
        
        .features .fa-telegram {
            color: var(--telegram);
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            margin-top: 20px;
        }
        
        .btn-buy {
            background: linear-gradient(135deg, var(--blue-medium) 0%, var(--blue-dark) 100%);
            color: white;
        }
        
        .btn-buy:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
        }
        
        .btn-free {
            background: var(--telegram);
            color: white;
            border: 2px solid var(--telegram);
        }
        
        .btn-free:hover {
            background: #0077b5;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 136, 204, 0.3);
        }
        
        /* Telegram блок */
        .telegram-check {
            background: linear-gradient(135deg, #0088cc 0%, #0077b5 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }
        
        .telegram-check h3 {
            font-size: 24px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .tg-btn {
            display: inline-block;
            background: white;
            color: var(--telegram);
            padding: 12px 30px;
            border-radius: 10px;
            text-decoration: none;
            font-weight: 600;
            margin-top: 15px;
            transition: all 0.3s;
        }
        
        .tg-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255,255,255,0.2);
        }
        
        /* Telegram код */
        .telegram-code {
            background: #f0f9ff;
            border: 2px dashed var(--telegram);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .code-input {
            font-size: 24px;
            font-weight: bold;
            color: var(--telegram);
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--telegram);
            text-align: center;
            letter-spacing: 3px;
            width: 200px;
            margin: 10px auto;
        }
        
        /* Форма */
        .payment-section {
            padding: 60px 0;
        }
        
        .payment-form {
            max-width: 600px;
            margin: 0 auto;
            background: var(--white);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(30, 58, 138, 0.1);
        }
        
        .selected-donate {
            background: #e0f2fe;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 5px solid var(--blue-medium);
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--blue-dark);
        }
        
        .form-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            transition: border 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--blue-medium);
        }
        
        /* Соглашение */
        .agreement-box {
            background: #f1f5f9;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #cbd5e1;
        }
        
        .agreement-box h3 {
            color: var(--blue-dark);
            margin-bottom: 15px;
        }
        
        .agreement-box p {
            margin-bottom: 15px;
            line-height: 1.6;
            font-size: 14px;
        }
        
        .signature-group {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 25px 0;
        }
        
        .signature-input {
            flex: 1;
            padding: 15px;
            border-bottom: 2px solid #cbd5e1;
            font-size: 16px;
            background: transparent;
        }
        
        .signature-input:focus {
            outline: none;
            border-color: var(--blue-medium);
        }
        
        .terms {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 25px 0;
        }
        
        .btn-pay {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .btn-pay:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(16, 185, 129, 0.25);
        }
        
        .btn-telegram {
            background: linear-gradient(135deg, var(--telegram) 0%, #0077b5 100%);
        }
        
        .btn-telegram:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0, 136, 204, 0.25);
        }
        
        /* Футер */
        .footer {
            background: var(--blue-dark);
            color: white;
            padding: 60px 0 30px;
            margin-top: 80px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }
        
        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #94a3b8;
            font-size: 14px;
        }
        
        /* Адаптив */
        @media (max-width: 768px) {
            .donate-grid { grid-template-columns: 1fr; }
            .header-content { flex-direction: column; gap: 20px; }
            .signature-group { flex-direction: column; }
        }
    </style>
</head>
<body>
    <!-- Шапка -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-crown"></i>
                    <span>SonnyWorld</span>
                </div>
                <a href="admin.html" class="admin-btn">
                    <i class="fas fa-lock"></i> Админ панель
                </a>
            </div>
        </div>
    </header>

    <!-- Главная -->
    <section class="hero">
        <div class="container">
            <h1>Донат для SonnyWorld</h1>
            <p class="hero-subtitle">Все привилегии оформляются через официальные системы</p>
            <div class="telegram-check">
                <h3>
                    <i class="fab fa-telegram"></i> Важно для бесплатных привилегий!
                </h3>
                <p>Для получения бесплатных привилегий необходимо вступить в наш Telegram-канал</p>
                <a href="https://t.me/Sonny_World" target="_blank" class="tg-btn">
                    <i class="fab fa-telegram"></i> Перейти в Telegram-канал
                </a>
                <p style="margin-top: 15px; font-size: 14px; opacity: 0.9;">После вступления вернитесь на эту страницу</p>
            </div>
        </div>
    </section>

    <!-- Привилегии -->
    <section class="donates container">
        <h2 class="section-title">Выберите привилегию</h2>
        <p class="section-subtitle">Бесплатные привилегии требуют подписки на Telegram-канал</p>
        
        <div class="donate-grid">
            <!-- D.Helper -->
            <div class="donate-card free">
                <div class="card-badge">Telegram</div>
                <h3 class="card-title">D.Helper</h3>
                <div class="price">Бесплатно</div>
                <ul class="features">
                    <li><i class="fas fa-check"></i> Префикс [D.Helper]</li>
                    <li><i class="fas fa-check"></i> Цветной ник в чате</li>
                    <li><i class="fas fa-check"></i> Доступ к /hat</li>
                    <li><i class="fas fa-check"></i> 2 слота для варпов</li>
                    <li><i class="fab fa-telegram"></i> Требуется подписка на Telegram</li>
                </ul>
                <button class="btn btn-free" onclick="selectDonate('D.Helper', 0, true)">
                    <i class="fab fa-telegram"></i> Получить через Telegram
                </button>
            </div>

            <!-- Helper -->
            <div class="donate-card">
                <div class="card-badge">ТОП</div>
                <h3 class="card-title">Helper</h3>
                <div class="price">1 ?</div>
                <ul class="features">
                    <li><i class="fas fa-check"></i> Все из D.Helper</li>
                    <li><i class="fas fa-check"></i> Префикс [Helper]</li>
                    <li><i class="fas fa-check"></i> Команда /tpa</li>
                    <li><i class="fas fa-check"></i> Полёт в лобби</li>
                    <li><i class="fas fa-check"></i> 5 слотов для варпов</li>
                </ul>
                <button class="btn btn-buy" onclick="selectDonate('Helper', 1, false)">
                    <i class="fas fa-shopping-cart"></i> Купить за 1 ?
                </button>
            </div>

            <!-- Moder -->
            <div class="donate-card">
                <h3 class="card-title">Moder</h3>
                <div class="price">299 ?</div>
                <ul class="features">
                    <li><i class="fas fa-check"></i> Все из Helper</li>
                    <li><i class="fas fa-check"></i> Префикс [Moder]</li>
                    <li><i class="fas fa-check"></i> Модераторские команды</li>
                    <li><i class="fas fa-check"></i> Невидимость в лобби</li>
                    <li><i class="fas fa-check"></i> 15 слотов для варпов</li>
                </ul>
                <button class="btn btn-buy" onclick="selectDonate('Moder', 299, false)">
                    <i class="fas fa-shopping-cart"></i> Купить за 299 ?
                </button>
            </div>

            <!-- Ml.Admin -->
            <div class="donate-card">
                <h3 class="card-title">Ml.Admin</h3>
                <div class="price">599 ?</div>
                <ul class="features">
                    <li><i class="fas fa-check"></i> Все из Moder</li>
                    <li><i class="fas fa-check"></i> Префикс [Ml.Admin]</li>
                    <li><i class="fas fa-check"></i> Админ команды</li>
                    <li><i class="fas fa-check"></i> Доступ к Creative миру</li>
                    <li><i class="fas fa-check"></i> 30 слотов для варпов</li>
                </ul>
                <button class="btn btn-buy" onclick="selectDonate('Ml.Admin', 599, false)">
                    <i class="fas fa-shopping-cart"></i> Купить за 599 ?
                </button>
            </div>

            <!-- Admin -->
            <div class="donate-card">
                <div class="card-badge" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">ПРЕМИУМ</div>
                <h3 class="card-title">Admin</h3>
                <div class="price">999 ?</div>
                <ul class="features">
                    <li><i class="fas fa-check"></i> Все из Ml.Admin</li>
                    <li><i class="fas fa-check"></i> Полные админ права</li>
                    <li><i class="fas fa-check"></i> Префикс [Admin]</li>
                    <li><i class="fas fa-check"></i> Личный Creative остров</li>
                    <li><i class="fas fa-check"></i> Неограниченные варпы</li>
                    <li><i class="fas fa-check"></i> Золотая метка в табе</li>
                </ul>
                <button class="btn btn-buy" onclick="selectDonate('Admin', 999, false)">
                    <i class="fas fa-crown"></i> Купить за 999 ?
                </button>
            </div>
        </div>
    </section>

    <!-- Форма оплаты -->
    <section class="payment-section">
        <div class="container">
            <div class="payment-form" id="paymentForm">
                <h2 class="section-title" style="margin-bottom: 30px;">
                    <i class="fas fa-credit-card"></i> Оформление привилегии
                </h2>
                
                <div class="selected-donate" id="selectedDonateInfo">
                    <h3>Выберите привилегию</h3>
                    <p>Нажмите на кнопку выше</p>
                </div>
                
                <form id="donateForm">
                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-user"></i> Ваш ник в игре
                        </label>
                        <input type="text" class="form-input" id="nickname" placeholder="Введите ваш игровой ник" required>
                    </div>

                    <!-- Telegram проверка для бесплатных привилегий -->
                    <div id="telegramCheckSection" style="display: none;">
                        <div class="telegram-check" style="background: #f0f9ff; color: #1e293b; border: 2px solid var(--telegram);">
                            <h3 style="color: var(--telegram);">
                                <i class="fab fa-telegram"></i> Проверка подписки
                            </h3>
                            <p><strong>Инструкция:</strong></p>
                            <ol style="text-align: left; padding-left: 20px; margin: 15px 0;">
                                <li>Подпишитесь на наш канал: <a href="https://t.me/Sonny_World" target="_blank" style="color: var(--telegram); font-weight: 600;">@Sonny_World</a></li>
                                <li>Напишите нашему боту команду: <code>/start</code></li>
                                <li>Бот отправит вам секретный код</li>
                                <li>Введите код ниже:</li>
                            </ol>
                            
                            <div class="telegram-code">
                                <p>Ваш секретный код:</p>
                                <div class="code-input" id="secretCode">Загрузка...</div>
                                <p style="margin-top: 10px; font-size: 14px; color: #666;">
                                    Код действителен 10 минут
                                </p>
                            </div>
                            
                            <div style="margin: 20px 0;">
                                <label style="display: block; margin-bottom: 10px; font-weight: 600;">
                                    <i class="fas fa-key"></i> Введите код из Telegram:
                                </label>
                                <input type="text" class="form-input" id="verificationCode" 
                                       placeholder="XXXXX" style="text-align: center; letter-spacing: 5px; font-size: 20px; max-width: 200px; margin: 0 auto;">
                            </div>
                            
                            <button type="button" class="btn" onclick="checkTelegramCode()" style="background: var(--telegram); color: white;">
                                <i class="fab fa-telegram"></i> Проверить код
                            </button>
                            
                            <p id="telegramStatus" style="margin-top: 15px; font-weight: 600;"></p>
                            
                            <div style="margin-top: 20px; padding: 15px; background: #e0f2fe; border-radius: 10px;">
                                <p style="font-size: 14px; margin-bottom: 10px;">
                                    <i class="fas fa-info-circle"></i> <strong>Нет кода?</strong>
                                </p>
                                <p style="font-size: 13px;">
                                    Напишите боту: <a href="https://t.me/SonnyWorldCheckBot" target="_blank" style="color: var(--telegram);">@SonnyWorldCheckBot</a><br>
                                    И отправьте команду: <code>/start</code>
                                </p>
                            </div>
                        </div>
                        <input type="hidden" id="telegramVerified" value="false">
                        <input type="hidden" id="generatedCode" value="">
                    </div>

                    <div class="agreement-box">
                        <h3>ПОЛЬЗОВАТЕЛЬСКОЕ СОГЛАШЕНИЕ</h3>
                        <!-- Текст соглашения оставь таким же -->
                    </div>
                    
                    <div class="signature-group">
                        <input type="text" class="signature-input" id="signature" placeholder="Введите ваше полное имя" required>
                        <div style="color: var(--blue-dark); white-space: nowrap;">
                            <i class="fas fa-signature"></i> Электронная подпись
                        </div>
                    </div>
                    
                    <div class="terms">
                        <input type="checkbox" id="agreeTerms" required style="width: 20px; height: 20px;">
                        <label for="agreeTerms" style="color: var(--blue-dark); font-weight: 600;">
                            Я прочитал и полностью согласен с пользовательским соглашением
                        </label>
                    </div>
                    
                    <button type="submit" class="btn-pay" id="payButton">
                        <i class="fas fa-lock"></i>
                        <span id="payButtonText">Согласен и перехожу к оплате</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- Футер -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div>
                    <h3 style="margin-bottom: 20px; font-size: 24px;">
                        <i class="fas fa-crown"></i> SonnyWorld
                    </h3>
                    <p>Minecraft сервер</p>
                    <p>Версия: 1.16-1.20</p>
                </div>
                
                <div>
                    <h3 style="margin-bottom: 20px;">Контакты</h3>
                    <p>Telegram-канал: <a href="https://t.me/Sonny_World" target="_blank" style="color: #94a3b8; text-decoration: underline;">@Sonny_World</a></p>
                    <p>Бот для проверки: <a href="https://t.me/SonnyWorldCheckBot" target="_blank" style="color: #94a3b8; text-decoration: underline;">@SonnyWorldCheckBot</a></p>
                </div>
                
                <div>
                    <h3 style="margin-bottom: 20px;">Важная информация</h3>
                    <p>• Возврат средств не осуществляется</p>
                    <p>• Бесплатные привилегии требуют подписки на Telegram</p>
                    <p>• Выдача в течение 24 часов</p>
                </div>
            </div>
            
            <div class="copyright">
                <p>© 2026 SonnyWorld Minecraft Server. Все права защищены.</p>
                <p style="margin-top: 10px; font-size: 12px;">
                    Этот сайт не является официальным продуктом Mojang AB. 
                    Minecraft является товарным знаком Mojang AB.
                </p>
            </div>
        </div>
    </footer>

    <script>
        // КОНФИГУРАЦИЯ
        const YOOMONEY_WALLET = "4100119450984155";
        const TELEGRAM_CHANNEL = "Sonny_World";
        const BOT_TOKEN = "8132159420:AAEiT8GFsyXNHzI3kRRmNmmx_L8vHFpB_f8";
        const BOT_USERNAME = "SonnyWorldCheckBot";
        
        let selectedDonate = null;
        let selectedPrice = 0;
        let isFreeDonate = false;
        let secretCode = '';
        let verificationStartTime = null;
        
        // Выбор доната
        function selectDonate(name, price, isFree = false) {
            selectedDonate = name;
            selectedPrice = price;
            isFreeDonate = isFree;
            
            document.getElementById('selectedDonateInfo').innerHTML = `
                <h3 style="color: var(--blue-dark);">${name}</h3>
                <p style="color: ${isFree ? 'var(--telegram)' : 'var(--blue-medium)'}; font-size: 24px; font-weight: bold;">
                    ${isFree ? 'Бесплатно (требуется Telegram)' : price + ' ?'}
                </p>
                <p style="color: var(--gray);">
                    ${isFree ? 
                        'Требуется подписка на Telegram-канал @Sonny_World' : 
                        'Оплата через ЮMoney • выдача в течение 24 часов'}
                </p>
            `;
            
            const payButton = document.getElementById('payButton');
            const payButtonText = document.getElementById('payButtonText');
            
            if (isFree) {
                payButtonText.textContent = 'Подтвердить через Telegram';
                payButton.className = 'btn-pay btn-telegram';
                document.getElementById('telegramCheckSection').style.display = 'block';
                document.getElementById('telegramStatus').textContent = '';
                document.getElementById('telegramVerified').value = 'false';
                
                // Генерируем секретный код
                generateSecretCode();
            } else {
                payButtonText.textContent = `Оплатить ${price} ?`;
                payButton.className = 'btn-pay';
                document.getElementById('telegramCheckSection').style.display = 'none';
            }
            
            document.getElementById('paymentForm').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        }
        
        // Генерация секретного кода
        function generateSecretCode() {
            // Генерируем 5-значный код
            secretCode = Math.random().toString(36).substr(2, 5).toUpperCase();
            verificationStartTime = Date.now();
            
            document.getElementById('secretCode').textContent = secretCode;
            document.getElementById('generatedCode').value = secretCode;
            
            // Обновляем код каждые 10 минут
            setTimeout(() => {
                if (document.getElementById('telegramVerified').value !== 'true') {
                    generateSecretCode();
                }
            }, 10 * 60 * 1000); // 10 минут
        }
        
        // Проверка кода
        function checkTelegramCode() {
            const enteredCode = document.getElementById('verificationCode').value.trim().toUpperCase();
            const statusElement = document.getElementById('telegramStatus');
            
            if (!enteredCode) {
                statusElement.innerHTML = '<span style="color: #ef4444;"><i class="fas fa-times-circle"></i> Введите код</span>';
                return;
            }
            
            // Проверяем время (код действителен 10 минут)
            const timeElapsed = Date.now() - verificationStartTime;
            const tenMinutes = 10 * 60 * 1000;
            
            if (timeElapsed > tenMinutes) {
                statusElement.innerHTML = '<span style="color: #ef4444;"><i class="fas fa-times-circle"></i> Код устарел. Обновите страницу</span>';
                generateSecretCode();
                return;
            }
            
            if (enteredCode === secretCode) {
                // Код верный
                document.getElementById('telegramVerified').value = 'true';
                statusElement.innerHTML = '<span style="color: #10b981;"><i class="fas fa-check-circle"></i> Подписка подтверждена!</span>';
                
                // Отправляем уведомление в Telegram (опционально)
                sendVerificationSuccess();
                
                Swal.fire({
                    title: 'Успешно!',
                    text: 'Ваша подписка на Telegram-канал подтверждена',
                    icon: 'success',
                    confirmButtonText: 'Продолжить',
                    confirmButtonColor: '#10b981'
                });
            } else {
                statusElement.innerHTML = '<span style="color: #ef4444;"><i class="fas fa-times-circle"></i> Неверный код</span>';
            }
        }
        
        // Отправка уведомления о успешной проверке (опционально)
        function sendVerificationSuccess() {
            // Можно добавить отправку уведомления в админский чат
            // Для этого нужен chat_id админа
        }
        
        // Обработка формы
        document.getElementById('donateForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (!selectedDonate) {
                Swal.fire({
                    title: 'Выберите привилегию!',
                    text: 'Пожалуйста, выберите привилегию для оформления',
                    icon: 'warning',
                    confirmButtonText: 'ОК',
                    confirmButtonColor: '#3b82f6'
                });
                return;
            }
            
            const nickname = document.getElementById('nickname').value;
            const signature = document.getElementById('signature').value;
            
            if (!nickname || nickname.length < 3) {
                Swal.fire('Ошибка!', 'Введите корректный игровой ник (минимум 3 символа)', 'error');
                return;
            }
            
            if (!signature) {
                Swal.fire('Ошибка!', 'Введите вашу подпись для подтверждения соглашения', 'error');
                return;
            }
            
            // Для бесплатных привилегий проверяем код
            if (isFreeDonate) {
                const telegramCheck = document.getElementById('telegramVerified').value;
                if (telegramCheck !== 'true') {
                    Swal.fire({
                        title: 'Требуется проверка подписки!',
                        html: `
                            <div style="text-align: left; padding: 10px;">
                                <p>Для получения бесплатной привилегии необходимо:</p>
                                <ol style="padding-left: 20px;">
                                    <li>Подписаться на <a href="https://t.me/Sonny_World" target="_blank" style="color: #0088cc;">Telegram-канал</a></li>
                                    <li>Получить код от бота</li>
                                    <li>Ввести код для проверки</li>
                                </ol>
                                <p style="color: #0088cc; margin-top: 10px;">
                                    <i class="fab fa-telegram"></i> Бот: <a href="https://t.me/SonnyWorldCheckBot" target="_blank">@SonnyWorldCheckBot</a>
                                </p>
                            </div>
                        `,
                        icon: 'warning',
                        confirmButtonText: 'Понятно',
                        confirmButtonColor: '#0088cc'
                    });
                    return;
                }
            }
            
            // Генерация ID заказа
            const orderId = 'SW' + Date.now() + Math.random().toString(36).substr(2, 6).toUpperCase();
            
            // Для платных привилегий создаем ссылку на ЮMoney
            let yoomoneyUrl = null;
            if (!isFreeDonate) {
                yoomoneyUrl = `https://yoomoney.ru/quickpay/confirm.xml?receiver=${YOOMONEY_WALLET}&quickpay-form=shop&sum=${selectedPrice}&label=${orderId}&targets=Привилегия+${selectedDonate}+для+${nickname}&successURL=${window.location.origin}&failURL=${window.location.origin}`;
            }
            
            // Сохранение заказа
            const order = {
                id: orderId,
                nickname: nickname,
                donate: selectedDonate,
                price: selectedPrice,
                signature: signature,
                date: new Date().toISOString(),
                status: 'pending',
                isFree: isFreeDonate,
                telegramVerified: isFreeDonate,
                secretCode: isFreeDonate ? secretCode : null,
                type: isFreeDonate ? 'telegram' : 'yoomoney'
            };
            
            const orders = JSON.parse(localStorage.getItem('sonny_orders')) || [];
            orders.push(order);
            localStorage.setItem('sonny_orders', JSON.stringify(orders));
            
            // Подтверждение
            const confirmResult = await Swal.fire({
                title: isFreeDonate ? 'Подтверждение бесплатной привилегии' : 'Подтверждение оплаты',
                html: `
                    <div style="text-align: left; padding: 10px;">
                        <p><b>Привилегия:</b> ${selectedDonate}</p>
                        <p><b>Игрок:</b> ${nickname}</p>
                        <p><b>Сумма:</b> ${isFreeDonate ? '0 ? (бесплатно)' : selectedPrice + ' ?'}</p>
                        <p><b>ID заказа:</b> <code>${orderId}</code></p>
                        <p><b>Способ:</b> ${isFreeDonate ? 'Telegram-подписка' : 'ЮMoney'}</p>
                        <hr>
                        <p style="color: #6b7280; font-size: 14px;">
                            ${isFreeDonate ? 'Привилегия будет выдана после проверки администратором' : 'Вы будете перенаправлены на страницу ЮMoney для оплаты'}
                        </p>
                        <p style="color: #ef4444; font-size: 14px; font-weight: bold; margin-top: 10px;">
                            ? ВОЗВРАТ СРЕДСТВ НЕВОЗМОЖЕН
                        </p>
                    </div>
                `,
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: isFreeDonate ? 'Подтвердить заявку' : 'Перейти к оплате',
                cancelButtonText: 'Отмена',
                confirmButtonColor: isFreeDonate ? '#10b981' : '#3b82f6',
                cancelButtonColor: '#6b7280'
            });
            
            if (!confirmResult.isConfirmed) return;
            
            // Для платных - открываем ЮMoney
            if (!isFreeDonate) {
                Swal.fire({
                    title: 'Перенаправление на оплату...',
                    text: 'Пожалуйста, подождите',
                    allowOutsideClick: false,
                    didOpen: () => { Swal.showLoading(); }
                });
                
                setTimeout(() => {
                    Swal.close();
                    window.open(yoomoneyUrl, '_blank');
                    
                    Swal.fire({
                        title: 'Оплата открыта',
                        html: `
                            <div style="text-align: left; padding: 10px;">
                                <p>Открылось окно с оплатой через ЮMoney.</p>
                                <p><b>Ваш ID заказа:</b> <code>${orderId}</code></p>
                                <p><b>Инструкция:</b></p>
                                <ol style="padding-left: 20px; margin-top: 10px;">
                                    <li>Завершите оплату в открывшемся окне</li>
                                    <li>Сохраните скриншот подтверждения</li>
                                    <li>Привилегия будет выдана в течение 24 часов</li>
                                </ol>
                                <p style="color: #ef4444; margin-top: 15px; font-weight: bold;">
                                    ? ВОЗВРАТ СРЕДСТВ НЕ ОСУЩЕСТВЛЯЕТСЯ
                                </p>
                            </div>
                        `,
                        icon: 'info',
                        confirmButtonText: 'Понятно',
                        confirmButtonColor: '#3b82f6'
                    });
                }, 1000);
            } else {
                // Для бесплатных - показываем успешное оформление
                Swal.fire({
                    title: 'Заявка оформлена!',
                    html: `
                        <div style="text-align: left; padding: 10px;">
                            <p>Ваша заявка на получение бесплатной привилегии успешно оформлена.</p>
                            <p><b>ID заказа:</b> <code>${orderId}</code></p>
                            <p><b>Привилегия:</b> ${selectedDonate}</p>
                            <p><b>Игрок:</b> ${nickname}</p>
                            <p><b>Код проверки:</b> ${secretCode}</p>
                            <hr>
                            <p style="color: #10b981; font-weight: bold; margin-top: 10px;">
                                <i class="fas fa-clock"></i> Привилегия будет выдана в течение 24 часов
                            </p>
                        </div>
                    `,
                    icon: 'success',
                    confirmButtonText: 'Отлично!',
                    confirmButtonColor: '#10b981'
                });
            }
            
            // Сброс формы
            setTimeout(() => {
                document.getElementById('donateForm').reset();
                selectedDonate = null;
                selectedPrice = 0;
                isFreeDonate = false;
                document.getElementById('telegramCheckSection').style.display = 'none';
                document.getElementById('telegramVerified').value = 'false';
                document.getElementById('selectedDonateInfo').innerHTML = `
                    <h3>Выберите привилегию</h3>
                    <p>Нажмите на кнопку выше</p>
                `;
                document.getElementById('payButtonText').textContent = 'Согласен и перехожу к оплате';
                document.getElementById('payButton').className = 'btn-pay';
            }, 2000);
        });
    </script>
</body>
</html>
